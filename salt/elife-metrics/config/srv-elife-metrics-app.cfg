{% set app = pillar.elife_metrics %}
[general]
debug: False
env: {{ pillar.elife.env }}
secret-key: {{ app.secret }}
{% if pillar.elife.env == 'dev' %}
allowed-hosts:
{% else %}
# no whitespace! yes, it matters! 
allowed-hosts: .{{ salt['elife.cfg']('project.domain') }},.{{ salt['elife.cfg']('project.int_domain') }}
{% endif %}

# section deprecated
[metrics]
ga-table-id: {{ app.ga_table_id }}

[ga]
table-id: {{ app.ga_table_id }}

[scopus]
api-key: {{ app.scopus.api_key }}

[database]
name: {{ salt['elife.cfg']('project.rds_dbname') or app.db.name }}
engine: django.db.backends.postgresql_psycopg2
user: {{ app.db.username }}
password: {{ app.db.password }}
host: {{ salt['elife.cfg']('cfn.outputs.RDSHost') or app.db.host }}
port: {{ salt['elife.cfg']('cfn.outputs.RDSPort') or app.db.port }}
